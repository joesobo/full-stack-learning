---
import { z } from "zod";

const response = await fetch("http://localhost:4000/todos");
const result = await response.json();

const todoSchema = z.object({
  id: z.number(),
  name: z.string(),
});

type Todo = z.infer<typeof todoSchema>;

let todos: Todo[] = [];

result.forEach((data: unknown) => {
  const parse = todoSchema.safeParse(data);

  if (parse.success) {
    todos.push(parse.data);
  } else {
    console.log(parse.error.issues);
  }
});
---

{todos.map((todo) => <h1>{todo.name}</h1>)}
